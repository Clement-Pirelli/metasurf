#!/bin/sh

prefix=/usr/local
opt=true
dbg=true

while [ $# -ne 0 ]; do
	case "$1" in
	--prefix=*)
		prefix=`echo $1 | sed 's/--prefix=//'`
		;;

	--enable-debug)
		dbg=true
		;;
	--disable-debug)
		dbg=false
		;;
	--enable-opt)
		opt=true
		;;
	--disable-opt)
		opt=false
		;;
	esac
	shift
done


echo 'configuring metasurf...'
echo "           prefix: $prefix"
echo 'debugging symbols:' `$dbg && echo yes || echo no`
echo '     optimization:' `$opt && echo yes || echo no`

echo 'generating makefile...'
echo "# automatically generated by the configure script" >Makefile
echo "PREFIX = $prefix" >>Makefile
$opt && echo "opt = -O3" >>Makefile
$dbg && echo "dbg = -g" >>Makefile
cat Makefile.in >>Makefile

echo done.
